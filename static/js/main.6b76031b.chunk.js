(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,n,t){e.exports=t(456)},456:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),o=t(14),i=t.n(o),c=t(19),l=t(23),u=t(53),s=t(68),p=(t(240),t(43)),d=function(){return null!==localStorage.getItem("@airbnb-Token")},m=function(e){return localStorage.getItem("@airbnb-ID")===String(e)},f=function(e,n){localStorage.setItem("@airbnb-Token",e),localStorage.setItem("@airbnb-ID",n)},b=function(){return localStorage.removeItem("@airbnb-Token")},h=function(e){var n=e.component,t=Object(p.a)(e,["component"]);return a.a.createElement(u.d,Object.assign({},t,{render:function(e){return d()?a.a.createElement(n,e):a.a.createElement(u.c,{to:"/"})}}))},g=function(e){var n=e.component,t=Object(p.a)(e,["component"]);return a.a.createElement(u.d,Object.assign({},t,{render:function(e){return d()?a.a.createElement(u.c,{to:"/app"}):a.a.createElement(n,e)}}))},v=t(17),y=t.n(v),j=t(25),O=t(5),x=t(4),E=t(10),w=t(8),k=t(11),S=t(42),C=t.n(S),P=t(27),z=t(207),F=t.n(z).a.create({baseURL:"https://airbnbbackend.herokuapp.com"});F.interceptors.request.use(function(){var e=Object(j.a)(y.a.mark(function e(n){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("@airbnb-Token"))&&(n.headers.Authorization="Bearer ".concat(t)),e.abrupt("return",n);case 3:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}());var D=F,A=t(66),R=t.n(A),L=t(7),I=t(6),_=t(18),q=t(67);function N(){var e=Object(L.a)(["\n  margin: 20px 0;\n  border: none;\n  border-bottom: 1px solid #cdcdcd;\n  width: 100%;\n"]);return N=function(){return e},e}function B(){var e=Object(L.a)(["\n  font-size: 2.4rem;\n"]);return B=function(){return e},e}function M(){var e=Object(L.a)(["\n  width: 100%;\n  padding: 1rem;\n  resize: none;\n\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  color: #444;\n  font-size: 1.5rem;\n\n  &:hover {\n    border-color: ",";\n  }\n  &:focus {\n    border-color: ",";\n  }\n  &:focus:hover {\n    border-color: ",";\n  }\n  &::placeholder {\n    color: #a5a5a5;\n  }\n"]);return M=function(){return e},e}function T(){var e=Object(L.a)([""]);return T=function(){return e},e}function U(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  color: ",";\n  font-weight: bold;\n  font-size: 1.5rem;\n  background: ",";\n  height: 40px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    background: ",";\n  }\n"]);return U=function(){return e},e}var J={red:"#fc6963",dark:"#222",white:"#F2F2F2"},G=I.b.button.attrs({type:"button"})(U(),function(e){return"white"===e.color?"#444":"#fff"},function(e){var n=e.color;return J[n]},function(e){var n=e.color;return Object(_.a)(.08,J[n])}),H=(I.b.button(T()),Object(I.b)(q.b)(M(),Object(_.a)(.075,"#ddd"),Object(_.a)(.15,"#ddd"),Object(_.a)(.15,"#ddd"))),W=I.b.h1(B()),Y=I.b.hr(N()),V=function(e){var n=e.loading,t=e.children,r=e.color,o=Object(p.a)(e,["loading","children","color"]);return a.a.createElement(G,Object.assign({color:r||"white"},o),n?a.a.createElement(C.a,{width:40,type:"bubbles"}):t)};V.defaultProps={loading:!1,children:"Button",color:"white"};var Z=V;function $(){var e=Object(L.a)(["\n  width: 100%;\n  position: relative;\n  margin-bottom: 2.2rem;\n\n  & > span {\n    position: absolute;\n    left: 0.5%;\n    top: 103%;\n    color: red;\n    font-size: 1.1rem;\n  }\n"]);return $=function(){return e},e}var Q=I.b.div($()),X=function(e){return a.a.createElement(Q,null,a.a.createElement(H,e))};function K(){var e=Object(L.a)(["\n  font-size: 1.5rem;\n  text-align: center;\n  font-weight: bold;\n  color: #999;\n  transition: all 0.3s;\n\n  &:hover {\n    color: ",";\n  }\n"]);return K=function(){return e},e}function ee(){var e=Object(L.a)([""]);return ee=function(){return e},e}function ne(){var e=Object(L.a)([""]);return ne=function(){return e},e}function te(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return te=function(){return e},e}function re(){var e=Object(L.a)([""]);return re=function(){return e},e}function ae(){var e=Object(L.a)(["\n  width: 40rem;\n  height: 50rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n\n  background: #fff;\n  padding: 2rem;\n  border-radius: 5px;\n\n  img {\n    width: 8rem;\n    margin-bottom: 3rem;\n  }\n\n  hr {\n    margin: 2rem 0;\n    border: none;\n    border-bottom: 1px solid #cdcdcd;\n    width: 100%;\n  }\n"]);return ae=function(){return e},e}function oe(){var e=Object(L.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n\n  background-image: linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url('background.jpeg');\n  background-size: cover;\n  background-position: center;\n"]);return oe=function(){return e},e}var ie=I.b.div(oe()),ce=Object(I.b)(q.a)(ae()),le=Object(I.b)(X)(re()),ue=I.b.div(te()),se=Object(I.b)(Z)(ne()),pe=Object(I.b)(Y)(ee()),de=Object(I.b)(l.Link)(K(),Object(_.a)(.1,"#999")),me=P.object().shape({username:P.string().required("Name is required"),email:P.string().email("Type a valid email").required("Email is required"),password:P.string().min(6,"Your password must have at least 6 characters").required("Password is required")}),fe=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(a)))).state={loading:!1},t.handleSignUp=function(){var e=Object(j.a)(y.a.mark(function e(n){var r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.history,e.prev=1,t.setState({loading:!0}),e.next=5,D.post("/users",n);case 5:r.push("/"),c.b.success("Great! Now you can login"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c.b.error("Unable to register");case 12:return e.prev=12,t.setState({loading:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(n){return e.apply(this,arguments)}}(),t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"render",value:function(){var e=this.state.loading;return a.a.createElement(ie,null,a.a.createElement(ce,{schema:me,onSubmit:this.handleSignUp},a.a.createElement("img",{src:R.a,alt:"Logo"}),a.a.createElement(le,{name:"username",placeholder:"Name"}),a.a.createElement(le,{type:"email",name:"email",placeholder:"Email"}),a.a.createElement(le,{type:"password",name:"password",placeholder:"Password"}),a.a.createElement(ue,null,a.a.createElement(se,{color:"red",type:"submit"},e?a.a.createElement(C.a,{type:"bubbles",width:40}):"Sign Up"),a.a.createElement(pe,null),a.a.createElement(de,{to:"/"},"I already have an account"))))}}]),n}(r.Component),be=Object(u.k)(fe),he=(t(187),P.object().shape({email:P.string().required("Fill in your email"),password:P.string().required("Fill in your password")})),ge=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(a)))).state={loading:!1},t.handleSingIn=function(){var e=Object(j.a)(y.a.mark(function e(n){var r,a,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.history,e.prev=1,t.setState({loading:!0}),e.next=5,D.post("/sessions",n);case 5:a=e.sent,o=a.data,f(o.token,o.id),r.push("/app"),c.b.success("Welcome, ".concat(o.username,"!")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),c.b.error("Invalid credentials");case 16:return e.prev=16,t.setState({loading:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[1,12,16,19]])}));return function(n){return e.apply(this,arguments)}}(),t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"render",value:function(){var e=this.state.loading;return a.a.createElement(ie,null,a.a.createElement(ce,{schema:he,onSubmit:this.handleSingIn},a.a.createElement("img",{src:R.a,alt:"Logo"}),a.a.createElement(le,{type:"email",name:"email",placeholder:"Email"}),a.a.createElement(le,{type:"password",name:"password",placeholder:"Password"}),a.a.createElement(ue,null,a.a.createElement(se,{type:"submit",color:"red"},e?a.a.createElement(C.a,{type:"bubbles",width:40}):"Login"),a.a.createElement(pe,null),a.a.createElement(de,{to:"/signup"},"Sign up for free"))))}}]),n}(r.Component),ve=Object(u.k)(ge),ye=t(13),je=t(37),Oe=t(212),xe=t.n(Oe),Ee=t(93),we=t(214),ke=t.n(we);function Se(){var e=Object(L.a)(["\n  background: #fc6963;\n  border: 0;\n  border-radius: 5px;\n  display: flex;\n  transition: all 0.2s;\n  &:hover {\n    background: ",";\n  }\n  .link {\n    color: #fff;\n    font-size: 13px;\n    padding: 5px;\n    text-decoration: none;\n  }\n"]);return Se=function(){return e},e}var Ce=I.b.div(Se(),Object(_.a)(.08,"#fc6963")),Pe=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionalDigits:2}),ze=function(e){var n=e.properties,t=e.match;return n.map(function(e){return a.a.createElement(Ee.a,{key:e.id,longitude:e.longitude,latitude:e.latitude,draggable:!0},a.a.createElement(Ce,null,a.a.createElement(l.Link,{className:"link",to:"".concat(t.url,"/property/").concat(e.id)},Pe.format(e.price))))})};function Fe(){var e=Object(L.a)(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  border: none;\n  background-color: ",";\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.25s;\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 11;\n  i {\n    font-size: 22px;\n  }\n  &:hover {\n    background-color: ",";\n  }\n  &:active {\n    background-color: ",";\n  }\n"]);return Fe=function(){return e},e}var De=I.b.button(Fe(),function(e){return e.color},function(e){var n=e.color;return Object(_.a)(.09,n)},function(e){var n=e.color;return Object(_.a)(.07,n)}),Ae=function(e){var n=e.children,t=e.color,r=Object(p.a)(e,["children","color"]);return a.a.createElement(De,Object.assign({type:"button",color:t},r),n)};Ae.defaultProps={props:{}};var Re=Ae,Le=t(215),Ie=t.n(Le),_e=t(94),qe=t(217);function Ne(){var e=Object(L.a)(["\n  margin-top: 0.5rem;\n"]);return Ne=function(){return e},e}function Be(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n"]);return Be=function(){return e},e}function Me(){var e=Object(L.a)(["\n  width: 100%;\n  padding: 1rem;\n  resize: none;\n  margin-bottom: 2.2rem;\n\n  border: 1px solid #ddd;\n  border-radius: 5px;\n  color: #444;\n  font-size: 1.5rem;\n\n  &:hover {\n    border-color: ",";\n  }\n  &:focus {\n    border-color: ",";\n  }\n  &:focus:hover {\n    border-color: ",";\n  }\n  &::placeholder {\n    color: #a5a5a5;\n  }\n"]);return Me=function(){return e},e}function Te(){var e=Object(L.a)([""]);return Te=function(){return e},e}function Ue(){var e=Object(L.a)([""]);return Ue=function(){return e},e}function Je(){var e=Object(L.a)([""]);return Je=function(){return e},e}function Ge(){var e=Object(L.a)(["\n  max-width: 53rem;\n  width: 95vw;\n  max-height: 99vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2.5rem;\n  overflow: hidden;\n"]);return Ge=function(){return e},e}function He(){var e=Object(L.a)(["\n  width: 100%;\n  max-height: 12rem;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 1rem;\n  margin-bottom: 2rem;\n  overflow: auto;\n\n  border: 2px dashed #ddd;\n  font-size: 1.6rem;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: all 0.2s;\n\n  &:hover p {\n    color: ",";\n  }\n  &:hover {\n    border-color: ",";\n  }\n  p {\n    color: #999;\n    width: 100%;\n    text-align: center;\n    padding: 1rem;\n    transition: all 0.3s;\n  }\n"]);return He=function(){return e},e}function We(){var e=Object(L.a)(["\n  width: 8rem;\n  height: 8rem;\n  margin: 0.5rem;\n\n  border-radius: 5px;\n  background-image: ",";\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n"]);return We=function(){return e},e}var Ye=I.b.div(We(),function(e){return"url(".concat(e.url,")")}),Ve=I.b.div(He(),Object(_.a)(.15,"#999"),Object(_.a)(.15,"#ddd")),Ze=Object(I.b)(q.a)(Ge()),$e=Object(I.b)(W)(Je()),Qe=Object(I.b)(Y)(Ue()),Xe=Object(I.b)(X)(Te()),Ke=Object(I.b)(qe.a)(Me(),Object(_.a)(.075,"#ddd"),Object(_.a)(.15,"#ddd"),Object(_.a)(.15,"#ddd")),en=I.b.div(Be()),nn=Object(I.b)(Z)(Ne()),tn=P.object().shape({title:P.string().required("A title is required"),address:P.string().required("An address is required"),description:P.string().required("A decription is required")}),rn=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(o)))).state={price:0,files:[],latitude:null,longitude:null,loading:!1},t.handleDrop=function(e){e.forEach(function(e){e.url=URL.createObjectURL(e)}),t.setState({files:e})},t.renderFiles=function(){var e=t.state.files;return a.a.createElement(a.a.Fragment,null,e.length?e.map(function(e){return a.a.createElement(Ye,{url:e.url,key:e.path})}):a.a.createElement("p",null,"Drop your images here or click to select manually"))},t.handleSubmit=function(){var e=Object(j.a)(y.a.mark(function e(n){var r,a,o,i,l,u,s,p,d,m;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.history,e.prev=1,t.setState({loading:!0}),a=t.state,o=a.price,i=a.latitude,l=a.longitude,u=a.files,e.next=6,D.post("/properties",Object(je.a)({},n,{price:o,latitude:i,longitude:l}));case 6:if(s=e.sent,p=s.data,u.length){e.next=13;break}c.b.success("Property added successfully!"),r.push("/app"),e.next=20;break;case 13:return d=new FormData,u.map(function(e,n){return d.append("image[".concat(n,"]"),e,e.name)}),m={headers:{"content-type":"multipart/form-data"}},e.next=18,D.post("/properties/".concat(p.id,"/images"),d,m);case 18:c.b.success("Property added successfully!"),r.push("/app");case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0),c.b.error("Something went wrong");case 26:return e.prev=26,t.setState({loading:!1}),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[1,22,26,29]])}));return function(n){return e.apply(this,arguments)}}(),t.handleCancel=function(){t.props.history.push("/app")},t.handlePriceChange=function(e,n,r){t.setState({price:r})},t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.location,t=e.history,r=Ie()(n.search);r.latitude&&r.longitude||t.push("/app"),this.setState(Object(je.a)({},r))}},{key:"render",value:function(){var e=this,n=this.state,t=n.loading,r=n.price;return a.a.createElement(Ze,{schema:tn,onSubmit:this.handleSubmit},a.a.createElement($e,null,"Add property"),a.a.createElement(Qe,null),a.a.createElement(Xe,{name:"title",placeholder:"Title"}),a.a.createElement(Xe,{name:"address",placeholder:"Address"}),a.a.createElement(Xe,{multiline:!0,rows:"3",name:"description",placeholder:"Description"}),a.a.createElement(Ke,{decimalSeparator:",",thousandSeparator:".",prefix:"R$ ",value:r,onChangeEvent:this.handlePriceChange}),a.a.createElement(_e.a,{multiple:!0,onDrop:function(n){return e.handleDrop(n)},accept:"image/*"},function(n){var t=n.getRootProps,r=n.getInputProps;return a.a.createElement(Ve,t(),a.a.createElement("input",r()),e.renderFiles())}),a.a.createElement(en,null,a.a.createElement(nn,{color:"red",loading:t,type:"submit"},"Confirm"),a.a.createElement(nn,{onClick:this.handleCancel},"Cancel")))}}]),n}(r.Component),an=Object(u.k)(rn);function on(){var e=Object(L.a)(["\n  margin-top: 0.5rem;\n"]);return on=function(){return e},e}function cn(){var e=Object(L.a)([""]);return cn=function(){return e},e}function ln(){var e=Object(L.a)(["\n  font-size: 2rem;\n"]);return ln=function(){return e},e}function un(){var e=Object(L.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 2.5rem;\n\n  border-radius: 5px;\n  background: #fff;\n"]);return un=function(){return e},e}function sn(){var e=Object(L.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  background: rgba(0, 0, 0, 0.9);\n"]);return sn=function(){return e},e}var pn=I.b.div(sn()),dn=I.b.div(un()),mn=Object(I.b)(W)(ln()),fn=Object(I.b)(Y)(cn()),bn=Object(I.b)(Z)(on()),hn=function(e){var n=e.message,t=e.confirmation,r=e.cancel;return a.a.createElement(pn,null,a.a.createElement(dn,null,a.a.createElement(mn,null,n),a.a.createElement(fn,null),a.a.createElement(bn,{color:"red",onClick:t},"Confirm"),a.a.createElement(bn,{onClick:r},"Cancel")))};hn.defaultProps={message:"Are you sure you want to proceed?"};var gn=hn;function vn(){var e=Object(L.a)(["\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  right: 0;\n  padding: 18px;\n  font-size: 18px;\n  color: #777;\n  transition: all 0.2s;\n\n  &:hover {\n    color: #111;\n  }\n"]);return vn=function(){return e},e}function yn(){var e=Object(L.a)(["\n  margin-left: 0.5rem;\n  width: 8rem;\n"]);return yn=function(){return e},e}function jn(){var e=Object(L.a)(["\n  display: flex;\n"]);return jn=function(){return e},e}function On(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  span {\n    color: #fc6963;\n    font-size: 3rem;\n  }\n"]);return On=function(){return e},e}function xn(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 2rem;\n\n  h4 {\n    margin-bottom: 0.5rem;\n    font-size: 1.6rem;\n  }\n\n  p {\n    font-size: 1.4rem;\n  }\n"]);return xn=function(){return e},e}function En(){var e=Object(L.a)([""]);return En=function(){return e},e}function wn(){var e=Object(L.a)([""]);return wn=function(){return e},e}function kn(){var e=Object(L.a)(["\n  width: 53rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2.5rem;\n  color: #222;\n  position: relative;\n"]);return kn=function(){return e},e}function Sn(){var e=Object(L.a)(["\n  border: 1px solid #cdcdcd;\n  max-height: 150px;\n  width: 100%;\n  overflow: auto;\n  font-size: 16px;\n  color: #777777;\n  text-align: center;\n  border-radius: 5px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  background-color: #fff;\n  transition: all 0.3s;\n"]);return Sn=function(){return e},e}function Cn(){var e=Object(L.a)(["\n  margin: 5px;\n  transition: all 0.2s;\n  &:hover {\n    opacity: 0.7;\n  }\n\n  div {\n    width: 100px;\n    height: 100px;\n    border-radius: 5px;\n    background-image: ",";\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    cursor: pointer;\n  }\n"]);return Cn=function(){return e},e}var Pn=I.b.a.attrs({target:"_blank",rel:"noreferrer"})(Cn(),function(e){return'url("'.concat(e.href,'")')}),zn=I.b.div(Sn()),Fn=I.b.div(kn()),Dn=Object(I.b)(W)(wn()),An=Object(I.b)(Y)(En()),Rn=I.b.div(xn()),Ln=I.b.div(On()),In=I.b.div(jn()),_n=Object(I.b)(Z)(yn()),qn=I.b.button(vn()),Nn=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}),Bn=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(o)))).state={property:null,loading:!1,confirmationOpen:!1},t.openConfirmation=function(){t.setState({confirmationOpen:!0})},t.deleteProperty=Object(j.a)(y.a.mark(function e(){var n,r,a,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.history,a=n.match,e.prev=1,o=a.params.id,e.next=5,D.delete("/properties/".concat(o));case 5:c.b.success("Property deleted!"),r.push("/app"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),c.b.error("Couldn't delete property");case 13:case"end":return e.stop()}},e,null,[[1,9]])})),t.handleCancel=function(){t.props.history.push("/app")},t.renderProperty=function(){var e=t.state.property,n=t.props.match;return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(Dn,null,e.title),a.a.createElement(An,null),a.a.createElement(Rn,null,a.a.createElement("h4",null,"Address:"),a.a.createElement("p",null,e.address)),a.a.createElement(Rn,null,a.a.createElement("h4",null,"Description:"),a.a.createElement("p",null,e.description)),a.a.createElement(zn,null,e.images.map(function(e){return a.a.createElement(Pn,{key:e.path,href:e.url},a.a.createElement("div",null))})),a.a.createElement(Ln,null,a.a.createElement("span",null,Nn.format(e.price)),m(e.user_id)&&a.a.createElement(In,null,a.a.createElement(l.Link,{to:{pathname:"".concat(n.url,"/edit"),state:{id:e.id}}},a.a.createElement(_n,{color:"red"},a.a.createElement("i",{className:"fa fa-edit"}))),a.a.createElement(_n,{color:"red",onClick:t.openConfirmation},a.a.createElement("i",{className:"fa fa-trash"})))),a.a.createElement(qn,{type:"button",onClick:t.handleCancel},a.a.createElement("i",{className:"fa fa-times"}))):"Property not found"},t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(y.a.mark(function e(){var n,t,r,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.match,e.prev=1,this.setState({loading:!0}),t=n.params.id,e.next=6,D.get("/properties/".concat(t));case 6:r=e.sent,a=r.data,this.setState({property:a}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),c.b.error("Error trying to get this property"),this.setState({property:null});case 16:return e.prev=16,this.setState({loading:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,11,16,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.state,t=n.loading,r=n.confirmationOpen;return a.a.createElement(Fn,null,t?a.a.createElement(C.a,{type:"bubbles",color:"#fc6963"}):this.renderProperty(),r&&a.a.createElement(gn,{message:"Are you sure you want to delete?",confirmation:this.deleteProperty,cancel:function(){return e.setState({confirmationOpen:!1})}}))}}]),n}(r.Component),Mn=t(136),Tn=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(o)))).state={property:{id:null,title:"",address:"",description:"",price:null,images:[]},loading:!1,files:[]},t.handleDrop=function(e){e.forEach(function(e){e.url=URL.createObjectURL(e)}),t.setState({files:e})},t.renderFiles=function(){var e=t.state,n=e.files,r=e.property.images;return a.a.createElement(a.a.Fragment,null,n.length||r.length?[].concat(Object(Mn.a)(n.map(function(e){return a.a.createElement(Ye,{url:e.url,key:e.path})})),Object(Mn.a)(r.map(function(e){return a.a.createElement(Ye,{url:e.url,key:e.path})}))):a.a.createElement("p",null,"Drop your images here or click to select manually"))},t.handleSubmit=function(){var e=Object(j.a)(y.a.mark(function e(n){var r,a,o,i,l,u,s,p,d,m,f;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.history,e.prev=1,t.setState({loading:!0}),a=n.title,o=n.address,i=n.description,l=t.state,u=l.files,s=l.property,p=s.id,d=s.price,e.next=8,D.put("/properties/".concat(p),{title:a,address:o,description:i,price:d});case 8:if(u.length){e.next=13;break}c.b.success("Property edited successfully!"),r.push("/app/property/".concat(p)),e.next=20;break;case 13:return m=new FormData,u.map(function(e,n){return m.append("image[".concat(n,"]"),e,e.name)}),f={headers:{"content-type":"multipart/form-data"}},e.next=18,D.post("/properties/".concat(p,"/images"),m,f);case 18:c.b.success("Property edited successfully!"),r.push("/app/property/".concat(p));case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),console.log(e.t0),c.b.error("Something went wrong");case 26:return e.prev=26,t.setState({loading:!1}),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[1,22,26,29]])}));return function(n){return e.apply(this,arguments)}}(),t.handleCancel=function(){t.props.history.goBack()},t.handlePriceChange=function(e,n,r){t.setState(function(e){var n=e.property;return{property:Object(je.a)({},n,{price:r})}})},t.handleDescriptionChange=function(e){e.persist(),t.setState(function(n){var t=n.property;return{property:Object(je.a)({},t,{description:e.target.value})}})},t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(y.a.mark(function e(){var n,t,r,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.location,e.prev=1,this.setState({loading:!0}),t=n.state.id,e.next=6,D.get("/properties/".concat(t));case 6:r=e.sent,a=r.data,this.setState({property:Object(je.a)({id:t},a,{price:parseFloat(a.price)})}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),c.b.error("Error trying to get the property"),this.setState({property:null});case 16:return e.prev=16,this.setState({loading:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[1,11,16,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.state,t=n.loading,r=n.property,o=r.title,i=r.price,c=r.description,l=r.address;return a.a.createElement(Ze,{onSubmit:this.handleSubmit,initialData:{title:o,address:l,description:c}},a.a.createElement($e,null,"Edit Property"),a.a.createElement(Qe,null),a.a.createElement(Xe,{name:"title",placeholder:"Title"}),a.a.createElement(Xe,{name:"address",placeholder:"Address"}),a.a.createElement(Xe,{multiline:!0,rows:"3",name:"description",value:c,placeholder:"Description",onChange:this.handleDescriptionChange}),a.a.createElement(Ke,{decimalSeparator:",",thousandSeparator:".",prefix:"R$ ",value:i,onChangeEvent:this.handlePriceChange}),a.a.createElement(_e.a,{multiple:!0,onDrop:this.handleDrop,accept:"image/*",className:"dropzone"},function(n){var t=n.getRootProps,r=n.getInputProps;return a.a.createElement(Ve,t(),a.a.createElement("input",r()),e.renderFiles())}),a.a.createElement(en,null,a.a.createElement(nn,{color:"red",loading:t,type:"submit"},"Confirm"),a.a.createElement(nn,{onClick:this.handleCancel},"Cancel")))}}]),n}(r.Component),Un=Object(u.k)(Tn),Jn=t(221);function Gn(){var e=Object(L.a)(["\n  height: 300px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 15px;\n\n  span {\n    color: #fff;\n    margin: 10px 0;\n    font-size: 13px;\n  }\n"]);return Gn=function(){return e},e}function Hn(){var e=Object(L.a)(["\n  width: 30rem;\n  margin-top: 0.5rem;\n  pointer-events: all;\n"]);return Hn=function(){return e},e}function Wn(){var e=Object(L.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  z-index: 99;\n"]);return Wn=function(){return e},e}function Yn(){var e=Object(L.a)(["\n  position: absolute;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  background: rgba(0, 0, 0, 0.1);\n  p {\n    color: #fff;\n    font-size: 1.8rem;\n  }\n  i {\n    color: #fc6963;\n    pointer-events: all;\n    font-size: 5rem;\n    margin: 10rem 0;\n    -webkit-text-fill-color: #fc6963;\n    -webkit-text-stroke-width: 2px;\n    -webkit-text-stroke-color: ",";\n  }\n"]);return Yn=function(){return e},e}function Vn(){var e=Object(L.a)([""]);return Vn=function(){return e},e}function Zn(){var e=Object(L.a)(["\n  position: absolute;\n  width: 8rem;\n  height: 100vh;\n  top: 0;\n  right: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n\n  > * {\n    margin: 1.5rem 0;\n  }\n"]);return Zn=function(){return e},e}function $n(){var e=Object(L.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;\n  width: 100vw;\n"]);return $n=function(){return e},e}var Qn=I.b.div($n()),Xn=I.b.div(Zn()),Kn=Object(I.b)(Jn.a).attrs({railStyle:{backgroundColor:"#222",borderRadius:10},trackStyle:[{background:"#fc6963"}],handleStyle:[{border:"none",background:"#fc6963"},{border:"none",background:"#fc6963"}],vertical:!0})(Vn()),et=I.b.div(Yn(),function(){return Object(_.a)(.05,"#fc6963")}),nt=I.b.div(Wn()),tt=Object(I.b)(Z)(Hn()),rt=I.b.div(Gn()),at=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionalDigits:2}),ot=function(e){function n(){var e,t;Object(O.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=Object(E.a)(this,(e=Object(w.a)(n)).call.apply(e,[this].concat(o)))).state={viewport:{latitude:-15.8808001,longitude:-47.8116024,zoom:12.8,bearing:0,pitch:0},filter:{min_price:null,max_price:null},properties:[],addPropertyOpen:!1},t.updatePropertiesLocalization=ke()(function(){return t.loadProperties()},500),t.loadProperties=Object(j.a)(y.a.mark(function e(){var n,r,a,o,i,l,u,s,p,d;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,r=n.viewport,a=n.filter,o=r.latitude,i=r.longitude,l=a.min_price,u=a.max_price,e.prev=3,e.next=6,D.get("properties",{params:{latitude:o,longitude:i,min_price:l,max_price:u}});case 6:s=e.sent,p=s.data,d=p.map(function(e){return Object(je.a)({},e,{latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude),price:parseFloat(e.price)})}),t.setState({properties:d}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0),c.b.error("Error trying to load properties");case 16:case"end":return e.stop()}},e,null,[[3,12]])})),t.handleLogout=function(){var e=t.props.history;b(),e.push("/")},t.renderActions=function(){var e=t.state.filter;return a.a.createElement(Xn,null,a.a.createElement(Re,{color:"#fc6963",onClick:function(){return t.setState({addPropertyOpen:!0})}},a.a.createElement("i",{className:"fa fa-plus"})),a.a.createElement(rt,null,a.a.createElement("span",null,e.max_price&&at.format(e.max_price)),a.a.createElement(Kn,{max:1e4,step:100,value:[e.min_price,e.max_price],onChange:function(e){var n=Object(ye.a)(e,2),r=n[0],a=n[1];a=0===a?null:a,t.setState({filter:{min_price:r,max_price:a}})},onAfterChange:t.updatePropertiesLocalization}),a.a.createElement("span",null,at.format(e.min_price))),a.a.createElement(Re,{color:"#222",onClick:t.handleLogout},a.a.createElement("i",{className:"fa fa-times"})))},t.handleAddProperty=function(){var e=t.props,n=e.match,r=e.history,a=t.state.viewport,o=a.latitude,i=a.longitude;t.setState({addPropertyOpen:!1}),r.push("".concat(n.url,"/properties/add?latitude=").concat(o,"&longitude=").concat(i))},t.renderPointReference=function(){return a.a.createElement(et,null,a.a.createElement("p",null,"Drag to choose the location"),a.a.createElement("i",{className:"fa fa-map-marker"}),a.a.createElement(nt,null,a.a.createElement(tt,{color:"red",onClick:t.handleAddProperty},"Right here"),a.a.createElement(tt,{onClick:function(){return t.setState({addPropertyOpen:!1})}},"Cancel")))},t}return Object(k.a)(n,e),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadProperties();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.props,t=n.containerWidth,r=n.containerHeight,o=n.match,i=this.state,c=i.properties,l=i.addPropertyOpen,u=i.viewport;return a.a.createElement(Qn,null,a.a.createElement(Ee.b,Object.assign({width:t,height:r},u,{mapStyle:"mapbox://styles/mapbox/dark-v9",mapboxApiAccessToken:"pk.eyJ1IjoiY2Fpb3F1aXJpbm8iLCJhIjoiY2p3MGk0MW1wMGJlMTQ0cndpZ2lpdTA2byJ9.vUbijPxSSgpH2WeBZFG7Hg",onViewportChange:function(n){e.setState({viewport:n})},onViewStateChange:this.updatePropertiesLocalization}),!l&&a.a.createElement(ze,{properties:c,match:o})),this.renderActions(),l&&this.renderPointReference(),a.a.createElement(s.ModalRoute,{path:"".concat(o.url,"/properties/add"),parentPath:o.url,component:an}),a.a.createElement(s.ModalRoute,{exact:!0,path:"".concat(o.url,"/property/:id"),parentPath:o.url,component:Bn}),a.a.createElement(s.ModalRoute,{exact:!0,path:"".concat(o.url,"/property/:id/edit"),parentPath:o.url,component:Un}))}}]),n}(r.Component),it=Object(u.k)(xe()()(ot)),ct=function(){return a.a.createElement(Qn,null,a.a.createElement(it,null))};function lt(){var e=Object(L.a)(["\n  color: #fc6963;\n  font-size: 2rem;\n  text-transform: uppercase;\n  text-align: center;\n  transition: all 0.2s;\n\n  &:hover {\n    color: ",";\n  }\n"]);return lt=function(){return e},e}function ut(){var e=Object(L.a)(["\n  font-size: 2.6rem;\n  margin: 2rem;\n  text-align: center;\n"]);return ut=function(){return e},e}function st(){var e=Object(L.a)(["\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n\n  background: #f5f5f5;\n\n  img {\n    width: 10rem;\n    margin-bottom: 2rem;\n  }\n"]);return st=function(){return e},e}var pt=I.b.div(st()),dt=I.b.h1(ut()),mt=Object(I.b)(l.Link)(lt(),Object(_.a)(.12,"#fc6963")),ft=function(){return a.a.createElement(pt,null,a.a.createElement("img",{src:R.a,alt:"Logo"}),a.a.createElement(dt,null,"Oops, this page no longer exists or never even existed"),a.a.createElement(mt,{to:"/"},"Redirect me to the right place"))},bt=function(){return a.a.createElement(l.BrowserRouter,{basename:"/airbnb_web"},a.a.createElement(a.a.Fragment,null,a.a.createElement(u.g,null,a.a.createElement(g,{exact:!0,path:"/",component:ve}),a.a.createElement(g,{path:"/signup",component:be}),a.a.createElement(h,{path:"/app",component:ct}),a.a.createElement(u.d,{path:"*",component:ft})),a.a.createElement(s.ModalContainer,null)))};t(455);function ht(){var e=Object(L.a)(["\n  * {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n    outline: 0;\n\n    &::-webkit-scrollbar {\n      width: 0.8rem;\n    }\n\n    &::-webkit-scrollbar-track {\n      background: #eee;\n      -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n    }\n\n    &::-webkit-scrollbar-thumb {\n      background: #fc6963;\n      outline: none;\n\n      &:hover {\n        background: ",";\n      }\n    }\n  }\n\n  body, html {\n    background: #eee;\n    font-family: 'Roboto', 'Helvetica', Arial, sans-serif;\n    text-rendering: optimizeLegibility !important;\n    -webkit-font-smoothing: antialiased !important;\n    height: 100%;\n    width: 100%;\n  }\n\n  html {\n    font-size: 62.5%;\n\n    @media only screen and (max-width: 56em) {\n      font-size: 60%;\n    }\n    @media only screen and (max-width: 37.5em) {\n      font-size: 56%;\n    }\n    @media only screen and (max-width: 25em) {\n      font-size: 50%;\n    }\n  }\n\n  button {\n    background: none;\n    outline: none;\n    border: none;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n\n  a {\n    text-decoration: none;\n    color: inherit;\n  }\n\n  input,\n  textarea {\n    font-family: inherit;\n    outline: none;\n  }\n\n  .custom_toast {\n    font-size: 1.6rem;\n    border-radius: 5px !important;\n  }\n"]);return ht=function(){return e},e}var gt=Object(I.a)(ht(),Object(_.a)(.08,"#fc6963")),vt=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(gt,null),a.a.createElement(bt,null),a.a.createElement(c.a,{toastClassName:"custom_toast",autoClose:2e3,hideProgressBar:!0}))};i.a.render(a.a.createElement(vt,null),document.getElementById("root"))},66:function(e,n,t){e.exports=t.p+"static/media/logo.75e8835b.svg"}},[[223,1,2]]]);
//# sourceMappingURL=main.6b76031b.chunk.js.map